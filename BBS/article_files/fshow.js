(function(){window.__dreamfull_var={pid:"",sid:"",bu:"bu.dreamfull.cn",log:"log.dreamfull.cn",isTest:false,imgsrc:"http://api.dreamfull.cn/s/video",callback:{close:[],click:[]}};var _p=false;var _jsversion="v1.6";function elog(a,b){try{var h=document,e=window,f=encodeURIComponent;var c=[];c.push("name="+f(a.name));c.push("msg="+f(a.stack?a.stack.substr(0,230):a.message));c.push("ref="+f(h.referrer));c.push("ex="+f(b));c.push("rnd="+Math.floor(2147483648*Math.random()));(new Image).src="http://log.dreamfull.cn/api/jserr.do?"+c.join("&")}catch(d){}}try{var _ie6=!-[1]&&!window.XMLHttpRequest;if(_ie6){return}var w=window,d=document,fn_encode=encodeURIComponent,fn_decode=decodeURIComponent;var $=function(id){return typeof id==="string"?document.getElementById(id):id};var $$=function(tagName,oParent){return(oParent||document).getElementsByTagName(tagName)};var console=null;try{console=window.console;if(!console){console=(function(){var instance=null;function Constructor(){}Constructor.prototype={log:function(str){}};function getInstance(){if(instance==null){instance=new Constructor()}return instance}return getInstance()})()}}catch(e){}var _print=function(info){if(_p){try{console.log(info)}catch(e){}}};var jadData,jadSlot,toolbar_pc;var _siteTypeInfo={"10":0,"11":0,"12":0,"13":0,"14":0,"99":0};var _GLOBAL={};var _uidParamMap={ref:"page_referrer",cr:"page_screen_size",end:null};var _paramMap={jsv:"jsversion",pid:"ad_pub_id",sid:"ad_slot_id",uid:"u_uid",crc:"u_crc",coo:"u_allow_coo",uct:"u_create_time",ref:"page_referrer",ds:"page_document_size",cr:"page_screen_size",ip:"page_intranet_ip",fc:"page_frameCount",ho:"page_isHomo",ct:"page_client_type",bl:"navigator_platform",pf:"page_platform",dsa:"p_dsa_local",hrc:"u_hour_count",dyc:"u_day_count",lt:"u_last_time",ssn:"ad_ssn",end:null};var _logMap={jsv:"jsversion",pid:"ad_pub_id",sid:"ad_slot_id",tid:"ad_site_id",uid:"u_uid",crc:"u_crc",coo:"u_allow_coo",uct:"u_create_time",ref:"page_referrer",ds:"page_document_size",cr:"page_screen_size",ip:"page_intranet_ip",fc:"page_frameCount",ho:"page_isHomo",ct:"page_client_type",bl:"navigator_platform",dsp:"ad_dsp_id",suid:"ad_source_id",ssid:"ad_source_slot_id",ads:"ad_ad_size",vtid:"ad_advert_id",whid:"ad_wh_id",_c:"ad_creative_id",_s:"ad_scheme_id",_p:"ad_dsp_price",_mi:"ad_odsp_imp_id",_i:"ad_odsp_imprsp_id",_o:"ad_odsp_id",ret:"",sht:"",shs:"show_success",sn:"sn",end:null};var _codeInfo={};function now(){return +new Date}function isNull(value){return(value===undefined||value===null||isNaN(value)||value==="")}function fn_destroyJsNode(){try{if(_GLOBAL.ad_site_type!="13"&&_GLOBAL.js_node){_GLOBAL.js_node.parentNode.removeChild(_GLOBAL.js_node)}}catch(e){}}function fn_destroy(){try{fn_destroyJsNode()}catch(e){}try{if(jadData){jadData.destroyIframeNodeAd();jadData.destroyIframeNodeUid()}}catch(e){}try{if(jadSlot){jadSlot.destroy()}}catch(e){}}var acee=0;var _init=function(){if(!document||!document.body){acee++;if(acee>=50){throw new Error("document.body.error");return}return setTimeout(arguments.callee,100)}_GLOBAL.jsversion=_jsversion;_GLOBAL.max_iframe_check=100;_GLOBAL.check_iframe_interval=50;_GLOBAL.runInFrameMax=5;_GLOBAL.showInFrame=true;_GLOBAL.dataInFrame=true;_GLOBAL.show_backup=true;_GLOBAL.hide_ad=false;_GLOBAL.add_viewport_meta=true;_GLOBAL.add_viewport_domains="www.x2x.cn,www.aaa.com,192.168.254.106";_GLOBAL.toolbar_pc_url="http://i.dreamfull.cn/my/toolbar.php";_GLOBAL.toolbar_enable=false;_GLOBAL.position_fixed=true;_GLOBAL.api_server="http://bu.dreamfull.cn";_GLOBAL.log_server="http://log.dreamfull.cn";_GLOBAL.my_toolbar_id="_maerd_dnegel_home_toobar";_GLOBAL.dreamKey="_maerd_dnegel_";_GLOBAL.api_port="";_GLOBAL.whiteList=[];_GLOBAL.jsonp_callback="cp";_GLOBAL.uri_getAd=""+_GLOBAL.api_port+"/api/gsp.do";_GLOBAL.uri_log=""+_GLOBAL.api_port+"/api/";_GLOBAL.uri_my="http://i.dreamfull.cn/api/my.jsp";_GLOBAL.vert_url="http://api.dreamfull.cn/s/html/vert.html";_GLOBAL.uri_prob="http://prob.go2tu.com/uid/c.jsp";_GLOBAL.global_wait_timeout=2000;_GLOBAL.uri_dsp_vert=""+_GLOBAL.api_port+"/api/dsp/vert.do";_GLOBAL.log_dsp_show="dspShow.do";_GLOBAL.log_show="show.do";_GLOBAL.log_click="click.do";_GLOBAL.log_close="close.do";_GLOBAL.max_zindex=2147483647;_GLOBAL.ad_site_type="";_GLOBAL.ad_logo="1";_GLOBAL.ad_pub_id="";_GLOBAL.ad_slot_id="";_GLOBAL.ad_site_id="";_GLOBAL.ad_dsp_id="";_GLOBAL.ad_advert_id="";_GLOBAL.ad_wh_id="";_GLOBAL.ad_source_id="";_GLOBAL.ad_source_slot_id="";_GLOBAL.ad_ad_size="";_GLOBAL.ad_s_no="";_GLOBAL.ad_is_my_tool=false;_GLOBAL.ad_my_tool_href="";_GLOBAL.ad_count=0;_GLOBAL.adid="";_GLOBAL.js_node="";_GLOBAL.js_src="";_GLOBAL.server_domain="";_GLOBAL.server_url="http://api.dreamfull.cn";_GLOBAL.api_url="";_GLOBAL.ad_ssn=0;_GLOBAL.page_frameCount=0;_GLOBAL.page_isHomo=1;_GLOBAL.page_client_type="";_GLOBAL.page_platform="";_GLOBAL.navigator_platform=navigator.platform;_GLOBAL.page_language="";_GLOBAL.page_intranet_ip="";_GLOBAL.page_url=window.location.href;_GLOBAL.page_domain=document.domain;_GLOBAL.page_title=document.title;_GLOBAL.page_referrer=document.referrer;_GLOBAL.page_keywords="";_GLOBAL.page_description="";_GLOBAL.page_screen_size=window.screen.width+"*"+window.screen.height;_GLOBAL.page_document_size="";_GLOBAL.u_uid="";_GLOBAL.u_crc="";_GLOBAL.u_allow_coo=1;_GLOBAL.u_create_time="";_GLOBAL.u_hour_count=0;_GLOBAL.u_day_count=0;_GLOBAL.u_last_time=+new Date("2015/6/1");_GLOBAL.p_dsa="";_GLOBAL.p_dsa_local="";_GLOBAL.server_time=(+new Date());_GLOBAL.time_start=(+new Date());_GLOBAL.time_request_start=0;_GLOBAL.time_show_start=0;_GLOBAL.time_show_end=0;_GLOBAL.show_success=-1;_GLOBAL.sn="";function fn_isIP(ip){var exp=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;var flag=ip.match(exp);if(flag!=undefined&&flag!=""){return true}else{return false}}if(fn_isIP(document.domain)){_print("current page is IP ,return.");throw new Error("ip page:"+document.domain);return}var getFrameCount=function(w){_print("get iframe.....");return w==w.parent?0:(arguments.callee(w.parent)+1)};_GLOBAL.page_frameCount=getFrameCount(w);_print("frame count:"+_GLOBAL.page_frameCount);var getHomologous=function(){var flag=0;try{var td=window.top.document;var pd=window.parent.document;flag=1}catch(e){try{var pd=window.parent.document;flag=2}catch(e){}try{var td=window.top.document;flag=3}catch(e){}}return flag};_GLOBAL.page_isHomo=getHomologous();if(_GLOBAL.page_frameCount>_GLOBAL.runInFrameMax){throw new Error("max Iframe:"+_GLOBAL.page_frameCount);return}var qrsJs=function(src,name){var _param_reg=new RegExp("(\\?|#|&)"+name+"=([^&]*)(&|$)","i");var r=src.match(_param_reg);return r!==null?decodeURIComponent(r[2]):""};var isMyFrame=(function(){var dk=qrsJs(_GLOBAL.page_url,_GLOBAL.dreamKey);return dk==1?true:false})();if(isMyFrame){throw new Error("my frame");return}_GLOBAL.page_language=(function(){var type=navigator.appName;var lang="";if(type=="Netscape"){lang=navigator.language}else{lang=navigator.userLanguage}return lang})();_GLOBAL.page_platform=(function(){var thisOS=navigator.platform;var os=new Array("Win32","Win64","Mac","Linux x86");for(var i=0;i<os.length;i++){if(thisOS.match(os[i])){return 1}}return 2})();_GLOBAL.page_client_type=(function(){function checkMobile(){var pda_user_agent_list=new Array("2.0 MMP","240320","AvantGo","BlackBerry","Blazer","Cellphone","Danger","DoCoMo","Elaine/3.0","EudoraWeb","hiptop","IEMobile","KYOCERA/WX310K","KFTHWI","KFAPWI","PlayBook","BB10","LG/U990","MIDP-2.0","MMEF20","MOT-V","NetFront","Newt","Nintendo Wii","Nitro","Nokia","Opera Mini","Opera Mobi","Palm","Playstation Portable","portalmmm","Proxinet","ProxiNet","SHARP-TQ-GX10","Small","SonyEricsson","Symbian OS","SymbianOS","TS21i-10","UP.Browser","UP.Link","Windows CE","WinWAP","Android","iPhone","iPod","iPad","Windows Phone","HTC");var pda_app_name_list=new Array("Microsoft Pocket Internet Explorer");var user_agent=navigator.userAgent.toString();for(var i=0;i<pda_user_agent_list.length;i++){if(user_agent.indexOf(pda_user_agent_list[i])>=0){return true}}var appName=navigator.appName.toString();for(var i=0;i<pda_app_name_list.length;i++){if(user_agent.indexOf(pda_app_name_list[i])>=0){return true}}return false}return checkMobile()?2:1})();_print(navigator.userAgent.toString());_print("platform:"+navigator.platform);_print(navigator.platform+", client_type:"+_GLOBAL.page_client_type+", platform:"+_GLOBAL.page_platform);if(_GLOBAL.page_client_type==1&&_GLOBAL.page_platform==2){_GLOBAL.page_client_type=2}for(var i=_GLOBAL.whiteList.length;i--;){if(document.domain.indexOf(_GLOBAL.whiteList[i])>-1){_print("white list");return}}function getCurrentJsNode(){var doc=document;var currentScriptNode;if(document.currentScript){currentScriptNode=document.currentScript}for(var scripts=doc.scripts,i=scripts.length-1,script;script=scripts[i--];){if(script.src&&script.src.indexOf("/fshow")!=-1&&script.src.indexOf("_zxcvb_pid")!=-1&&script.src.indexOf("_qwert_sid")!=-1){if(!script.getAttribute("used")){currentScriptNode=script;break}}}if(currentScriptNode){_GLOBAL.js_node=currentScriptNode;_GLOBAL.js_node.setAttribute("used",1);_GLOBAL.js_src=_GLOBAL.js_node.getAttribute("src")}return currentScriptNode}getCurrentJsNode();if(!_GLOBAL.js_src){throw new Error("no jsnode");return}function UrlRegEx(url){var re=/(\w*:?)\/\/([^\:|\/]+)(\:\d*)?(.*\/)([^#|\?|\n]+)?(#.*)?(\?.*)?/i;var arr=url.match(re);return arr}var _urlArray=UrlRegEx(_GLOBAL.js_src);if(!_GLOBAL.server_url){_GLOBAL.server_url=_urlArray[1]+"//"+_urlArray[2]}if(!_GLOBAL.server_domain){_GLOBAL.server_domain=_urlArray[2]}function fn_trim(str){if(typeof str!=="string"){return str}if(typeof str.trim==="function"){return str.trim()}else{return str.replace(/^(\u3000|\s|\t|\u00A0)*|(\u3000|\s|\t|\u00A0)*$/g,"")}}var _pub_id=fn_trim(qrsJs(_GLOBAL.js_src,"_zxcvb_pid"));_GLOBAL.ad_slot_id=fn_trim(qrsJs(_GLOBAL.js_src,"_qwert_sid"));var debugMode=fn_trim(qrsJs(_GLOBAL.js_src,"_d"));if(debugMode&&debugMode==1){_p=true}if(!_pub_id||!_GLOBAL.ad_slot_id){throw new Error("no sid")}var maxFrameCountSever=0;if(_pub_id.length==12){_GLOBAL.ad_pub_id=_pub_id.slice(3);_GLOBAL.ad_site_type=_pub_id.slice(0,2);maxFrameCountSever=_pub_id.slice(2,3)}else{_GLOBAL.ad_pub_id=_pub_id}_GLOBAL.adid=_GLOBAL.ad_pub_id+"_"+_GLOBAL.ad_slot_id;var maxFrameCount=fn_trim(qrsJs(_GLOBAL.js_src,"_mf"));maxFrameCount=maxFrameCount||maxFrameCountSever;_print("site max frame:"+maxFrameCount);if(_GLOBAL.page_frameCount>maxFrameCount){throw new Error("in iframe:"+_GLOBAL.page_frameCount)}if(window["_llufmaerd_count"+_GLOBAL.adid]){window["_llufmaerd_count"+_GLOBAL.adid]++}else{window["_llufmaerd_count"+_GLOBAL.adid]=1}_GLOBAL.ad_count=window["_llufmaerd_count"+_GLOBAL.adid];var __hide=fn_trim(qrsJs(_GLOBAL.js_src,"_hide"));if(__hide&&__hide==1){_GLOBAL.hide_ad=true}var __host=fn_trim(qrsJs(_GLOBAL.js_src,"_host"));if(__host){_GLOBAL.api_url="http://"+__host;_GLOBAL.log_server="http://"+__host;window.__dreamfull_var.bu=__host;window.__dreamfull_var.log=__host}else{if(_GLOBAL.api_server){_GLOBAL.api_url=_GLOBAL.api_server}else{_GLOBAL.api_url=_GLOBAL.server_url}}(function(){try{var RTCPeerConnection=window.webkitRTCPeerConnection||window.mozRTCPeerConnection;if(RTCPeerConnection){(function(){var rtc=new RTCPeerConnection({iceServers:[]});if(1||window.mozRTCPeerConnection){rtc.createDataChannel("",{reliable:false})}rtc.onicecandidate=function(evt){if(evt.candidate){grepSDP("a="+evt.candidate.candidate)}};rtc.createOffer(function(offerDesc){grepSDP(offerDesc.sdp);rtc.setLocalDescription(offerDesc)},function(e){});var addrs=Object.create(null);addrs["0.0.0.0"]=false;function updateDisplay(newAddr){if(newAddr in addrs){return}else{addrs[newAddr]=true}var displayAddrs=Object.keys(addrs).filter(function(k){return addrs[k]});if(displayAddrs&&displayAddrs.length>0){_GLOBAL.page_intranet_ip=(displayAddrs[0]);rtc.close()}}function grepSDP(sdp){var hosts=[];sdp.split("\r\n").forEach(function(line){if(~line.indexOf("a=candidate")){var parts=line.split(" "),addr=parts[4],type=parts[7];if(type==="host"){updateDisplay(addr)}}else{if(~line.indexOf("c=")){var parts=line.split(" "),addr=parts[2];updateDisplay(addr)}}})}})()}}catch(e){}})();_GLOBAL.page_document_size=document.body.offsetWidth+"*"+document.body.offsetHeight;var _IE=(function(){var v=3,div=document.createElement("div"),all=div.getElementsByTagName("i");while(div.innerHTML="<!--[if gt IE "+(++v)+"]><i></i><![endif]-->",all[0]){}return v>4?v:false}());_print(document.compatMode+","+_IE);if(_IE&&document.compatMode=="BackCompat"&&(_IE<=8)){_GLOBAL.position_fixed=false}var Messenger=(function(){var prefix="_QWERJAD_",supportPostMessage="postMessage" in window;function data2Msg(data){var msgArray=[];if(data){for(var key in data){msgArray.push(key+"="+encodeURIComponent(data[key]))}}return msgArray.join("&")}function msg2Data(msg){var data={};if(msg){var msgArray=msg.split("&");for(var i=0;i<msgArray.length;i++){var field=msgArray[i].split("=");data[field[0]]=decodeURIComponent(field[1])}}return data}function Target(target,name,myName){var errMsg="";if(arguments.length<2){errMsg="target Error - target and name are both required"}else{if(typeof target!="object"){errMsg="target Error - target itself must be window object"}else{if(typeof name!="string"){errMsg="target Error - target name must be string type"}}}if(errMsg){throw new Error(errMsg)}this.target=target;this.name=name;this.myName=myName}if(supportPostMessage){Target.prototype.send=function(data,action){this.target.postMessage(prefix+this.myName+"^^^"+(action?action:"")+"^^^"+data2Msg(data),"*")}}else{Target.prototype.send=function(data,action){var targetFunc=window.navigator[prefix+this.name];if(typeof targetFunc=="function"){targetFunc(prefix+this.myName+"^^^"+(action?action:"")+"^^^"+data2Msg(data),window)}else{throw new Error("target callback function is not defined")}}}function Messenger(messengerName,projectName){this.targets={};this.name=messengerName;this.listenFunc={};prefix=projectName||prefix;if(typeof prefix!=="string"){prefix=prefix.toString()}this.initListen()}Messenger.prototype.addTarget=function(target,name){var targetObj=new Target(target,name,this.name);this.targets[name]=targetObj};Messenger.prototype.initListen=function(){var selfObject=this;var generalCallback=function(msg){_print("msg:");_print(msg);if(typeof msg=="object"&&msg.data&&typeof msg.data=="string"){msg=msg.data}if(typeof msg=="string"&&msg.indexOf(prefix)==0){msg=msg.slice(prefix.length);var sliceIndex=msg.indexOf("^^^");var targetName=msg.slice(0,sliceIndex);var msg=msg.slice(sliceIndex+3);var actionIndex=msg.indexOf("^^^");var action=msg.slice(0,actionIndex);var msg=msg.slice(actionIndex+3);if(selfObject.listenFunc[targetName+"_"+action]){selfObject.listenFunc[targetName+"_"+action](msg2Data(msg))}}};if(supportPostMessage){if("addEventListener" in document){window.addEventListener("message",generalCallback,false)}else{if("attachEvent" in document){window.attachEvent("onmessage",generalCallback)}}}else{window.navigator[prefix+this.name]=generalCallback}};Messenger.prototype.listen=function(opt){var opt=opt||{targetName:"",action:"",callback:function(data){}};this.listenFunc[opt.targetName+"_"+opt.action]=(opt.callback)};Messenger.prototype.clear=function(){this.listenFunc={}};Messenger.prototype.sendAll=function(data,action){var targets=this.targets,target;for(target in targets){if(targets.hasOwnProperty(target)){targets[target].send(data,action)}}};Messenger.prototype.sendMessage=function(opt){var opt=opt||{targetName:"",action:"",data:{}};this.targets[opt.targetName].send(opt.data,opt.action)};return Messenger})();var fn_crossDomain=function(type,typeKey,url,onsuccess,onerror){var callbackName="__zxcv_"+_GLOBAL.ad_slot_id+"_"+now()+"_"+Math.floor(2147483648*Math.random())+"_callback";if(type=="jsonp"){window[callbackName]=function(){if(onsuccess){onsuccess(arguments[0])}}}var script=document.createElement("script");script.async="async";script.src=url+(/\?/.test(url)?"&":"?")+typeKey+"="+callbackName;script.onload=script.onreadystatechange=function(){if(!script.readyState||/loaded|complete/.test(script.readyState)){script.onload=script.onreadystatechange=null;if(type=="var"){if(onsuccess){onsuccess(window[callbackName])}}if(script.parentNode){script.parentNode.removeChild(script)}window[callbackName]=null}};script.onerror=function(e){if(script.parentNode){script.parentNode.removeChild(script)}window[callbackName]=null;if(onerror){onerror(e)}};document.body.appendChild(script)};var fn_jsonp=function(url,param,callback){var fullUrl=url+(/\?/.test(url)?"&":"?")+fn_assembleParamUri(param);fn_crossDomain("jsonp",_GLOBAL.jsonp_callback,fullUrl,callback,function(e){fn_destroy()})};var fn_assembleParamUri=function(param,needCdn){var c=[];if(param){for(var name in param){c.push(name+"="+fn_encode(param[name]))}}if(!needCdn){c.push("rnd="+Math.floor(2147483648*Math.random()))}return c.join("&")};var fn_assembleParam=function(map,extend){var param={};if(map){for(var name in map){if("end"!=name&&map[name]){param[name]=_GLOBAL[map[name]]}}}if(extend){for(var key in extend){param[key]=extend[key]}}return param};var fn_log=function(type,param,extend){var url=_GLOBAL.log_server+_GLOBAL.uri_log+type;var fullUrl=url+(/\?/.test(url)?"&":"?")+fn_assembleParamUri(fn_assembleParam(param,extend));(new Image()).src=fullUrl+"&cp=__ass"};var fn_addEvent=function(el,type,fn){var myEventFn=function(e){if(type=="mouseover"){if(!e){e=window.event}var reltg=e.relatedTarget?e.relatedTarget:e.fromElement;while(reltg&&reltg!=this){reltg=reltg.parentNode}if(reltg!=this){fn.call(el,e)}}else{if(type=="mouseout"){if(!e){e=window.event}var reltg=e.relatedTarget?e.relatedTarget:e.toElement;while(reltg&&reltg!=this){reltg=reltg.parentNode}if(reltg!=this){fn.call(el,e)}}else{fn.call(el,e)}}};if(el.addEventListener){el.addEventListener(type,myEventFn,false)}else{el.attachEvent("on"+type,myEventFn)}};var fn_getCurrentStyle=function(obj,prop){return window.getComputedStyle?window.getComputedStyle(obj,null)[prop]:obj.currentStyle[prop]};var fn_getStyleInt=function(obj,prop){return fn_parseStyleInt(fn_getCurrentStyle(obj,prop))};var fn_convertCssObj=function(cssObj){if(cssObj instanceof Array){return cssObj.join(";")}else{var cssArray=[];for(var name in cssObj){cssArray.push(name+":"+cssObj[name])}return cssArray.join(";")}};var fn_createNode=function(opt,parent){var d=document;var oIns=d.createElement(opt.tagName);if(opt.attrs){for(var attr in opt.attrs){var val=opt.attrs[attr];if(attr=="style"){var cssText;if(typeof val=="string"){cssText=val}else{cssText=fn_convertCssObj(val)}oIns.style.cssText=cssText}else{if(attr=="class"){oIns.className=val}else{oIns.setAttribute(attr,val)}}}}if(oIns.tagName=="SCRIPT"){oIns.setAttribute("async","async")}if(opt.events){for(var e in opt.events){oIns[e]=opt.events[e]}}if(opt.text){oIns.innerHTML=opt.text}if(opt.content){oIns.text=opt.content}if(parent){parent.appendChild(oIns)}return oIns};var fn_createNodes=function(opts,parent){if(opts){for(var opt in opts){fn_createNode(opts[opt],parent)}}};var fn_crossScreen=function(){var aWidth=screen.availWidth;var aHeight=screen.availHeight;if(aWidth>aHeight){return true}else{return false}};var fn_getScaleX=function(slotWidth,slotHeight){var width=slotWidth.replace(/px/,"");var height=slotHeight.replace(/px/,"");var scrollWidth=window.innerWidth;var scrollHeight=window.innerHeight;var scalex=scrollWidth/width;if(fn_crossScreen()){if(height*scalex/scrollHeight>0.1){scalex=scrollHeight*0.1/height}}else{if(height*scalex/scrollHeight>0.15){scalex=scrollHeight*0.15/height}}return scalex};var fn_getScaleBottom=function(scalex,slotHeight){var height=slotHeight.replace(/px/,"");var bottom=(height*scalex-height)/2;return bottom};var fn_getScaleLeft=function(scalex,slotWidth){var left=window.innerWidth;var width=slotWidth.replace(/px/,"");left=(left-width)/2;return left};var fn_parseStyleInt=function(w){var s=w.replace("px","")*1;if(isNaN(s)){return -1}else{return s}};var fn_addMeta4Viewport=function(){try{if(_GLOBAL.page_client_type==2&&_GLOBAL.add_viewport_domains.indexOf(_GLOBAL.page_domain)!=-1){var metas=document.head.getElementsByTagName("META");if(!metas.viewport){var m=document.createElement("META");m.setAttribute("name","viewport");m.setAttribute("content","width=device-width,initial-scale=1.0");document.head.appendChild(m)}}}catch(e){}};var IframeOnClick={resolution:100,iframes:[],interval:null,Iframe:function(){this.element=arguments[0];this.cb=arguments[1];this.maxEvent=arguments[2]?arguments[2]:1;this.hasTracked=false;this.eventCount=0},track:function(element,cb,maxEvent){this.iframes.push(new this.Iframe(element,cb,maxEvent));if(!this.interval){var _this=this;this.interval=setInterval(function(){_this.checkClick()},this.resolution)}},destory:function(element){for(var i in this.iframes){if(element==this.iframes[i].element){this.iframes.pop(this.iframes[i])}}if(this.iframes.length<=0){this.destoryAll()}},destoryAll:function(){clearInterval(this.interval);this.iframes=[]},checkClick:function(){if(document.activeElement){var activeElement=document.activeElement;for(var i in this.iframes){var iframe=this.iframes[i];if(activeElement===iframe.element){if(iframe.hasTracked==false&&iframe.eventCount<iframe.maxEvent){iframe.eventCount++;var finished=iframe.eventCount>=iframe.maxEvent;iframe.cb.call(iframe.element,finished);iframe.hasTracked=true;if(finished){this.destory(iframe.element)}}}else{iframe.hasTracked=false}}}}};var fn_getServerTime=function(local_start_time,local_end_time,server_time){return server_time};var fn_isArray=function(obj){return Object.prototype.toString.call(obj)==="[object Array]"};var fn_addcss=function(css){var D=document,$=D.createElement("style");$.setAttribute("type","text/css");$.styleSheet&&($.styleSheet.cssText=css)||$.appendChild(D.createTextNode(css));D.getElementsByTagName("head")[0].appendChild($)};var AutoPlay=function(opt){this.initialize(opt)};AutoPlay.prototype={initialize:function(opt){fn_addcss("#"+opt.id+"{background:#000;text-align:center;font:12px/20px Arial;position:relative;width:"+opt.width+"px;height:"+opt.height+"px;background:#fff;padding: 0px;margin: 0px;border:0px;overflow: hidden;} #"+opt.id+" .list{position:relative;width:"+opt.width+"px;height:"+opt.height+"px;overflow:hidden;} #"+opt.id+" .list ul{list-style-type:none;position:absolute;top:0;left:0;margin:0;padding:0;} #"+opt.id+" .list li{overflow:hidden;margin:0;padding:0;} #"+opt.id+" .count{margin:0;padding:0;position:absolute;left:5px;bottom:5px;} #"+opt.id+" .count li{margin:0;padding:0;color:#fff;float:left;width:20px;height:20px;cursor:pointer;margin-right:5px;overflow:hidden;background:#F90;opacity:0.7;filter:alpha(opacity=70);border-radius:20px;} #"+opt.id+" .count li.current{color:#fff;opacity:1;filter:alpha(opacity=100);font-weight:700;background:#f60;} ");var oThis=this;this.oBox=this.addItems(opt);this.timer=null;this.autoTimer=null;this.iNow=0;this.creatBtn();this.toggle();this.autoTimer=setInterval(function(){oThis.next()},3000);this.oBox.onmouseover=function(){clearInterval(oThis.autoTimer)};this.oBox.onmouseout=function(){oThis.autoTimer=setInterval(function(){oThis.next()},3000)};for(var i=0;i<this.aBtn.length;i++){this.aBtn[i].index=i;this.aBtn[i].onmouseover=function(){oThis.iNow=this.index;oThis.toggle()}}},addItems:function(opt){var oBox=fn_createNode({tagName:"div",attrs:{id:opt.id}},opt.target);var listDiv=fn_createNode({tagName:"div",attrs:{"class":"list"}},oBox);var oUl=fn_createNode({tagName:"ul"},listDiv);var oLis=[];if(opt.items&&opt.items.length>0){for(var i=0;i<opt.items.length;i++){oLis[i]=fn_createNode({tagName:"li"},oUl);oLis[i].appendChild(opt.items[i])}}this.oUl=oUl;this.aImg=oLis;return oBox},creatBtn:function(){this.oCount=document.createElement("ul");this.oFrag=document.createDocumentFragment();this.oCount.className="count";var aBtns=[];for(var i=0;i<this.aImg.length;i++){var oLi=document.createElement("li");oLi.innerHTML=i+1;aBtns[i]=oLi;this.oFrag.appendChild(oLi)}this.oCount.appendChild(this.oFrag);this.oBox.appendChild(this.oCount);this.aBtn=aBtns},toggle:function(){for(var i=0;i<this.aBtn.length;i++){this.aBtn[i].className=""}this.aBtn[this.iNow].className="current";this.doMove(-(this.iNow*this.aImg[0].offsetHeight))},next:function(){this.iNow++;this.iNow==this.aBtn.length&&(this.iNow=0);this.toggle()},doMove:function(iTarget){var oThis=this;clearInterval(oThis.timer);oThis.timer=setInterval(function(){var iSpeed=(iTarget-oThis.oUl.offsetTop)/5;iSpeed=iSpeed>0?Math.ceil(iSpeed):Math.floor(iSpeed);oThis.oUl.offsetTop==iTarget?clearInterval(oThis.timer):(oThis.oUl.style.top=oThis.oUl.offsetTop+iSpeed+"px")},30)}};var _Base64Util=function(){this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};_Base64Util.prototype={encode:function(input){var output="";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;input=this._utf8_encode(input);while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else{if(isNaN(chr3)){enc4=64}}output=output+this._keyStr.charAt(enc1)+this._keyStr.charAt(enc2)+this._keyStr.charAt(enc3)+this._keyStr.charAt(enc4)}return output},decode:function(input){var output="";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(i<input.length){enc1=this._keyStr.indexOf(input.charAt(i++));enc2=this._keyStr.indexOf(input.charAt(i++));enc3=this._keyStr.indexOf(input.charAt(i++));enc4=this._keyStr.indexOf(input.charAt(i++));chr1=(enc1<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;output=output+String.fromCharCode(chr1);if(enc3!=64){output=output+String.fromCharCode(chr2)}if(enc4!=64){output=output+String.fromCharCode(chr3)}}output=this._utf8_decode(output);return output},_utf8_encode:function(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c)}else{if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c&63)|128)}else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)&63)|128);utftext+=String.fromCharCode((c&63)|128)}}}return utftext},_utf8_decode:function(utftext){var string="";var i=0;var c=c1=c2=0;while(i<utftext.length){c=utftext.charCodeAt(i);if(c<128){string+=String.fromCharCode(c);i++}else{if((c>191)&&(c<224)){c2=utftext.charCodeAt(i+1);string+=String.fromCharCode(((c&31)<<6)|(c2&63));i+=2}else{c2=utftext.charCodeAt(i+1);c3=utftext.charCodeAt(i+2);string+=String.fromCharCode(((c&15)<<12)|((c2&63)<<6)|(c3&63));i+=3}}}return string}};var Base64Util=new _Base64Util();if(_GLOBAL.add_viewport_meta){fn_addMeta4Viewport()}var JadData=function(){var jadDataSelf=this;var isGetedSlotData=false;var u_data={u_uid:"",u_allow_coo:0,u_crc:""};var uid_global;var iframe_ad_success=false;var iframe_uid_success=false;var parent_name="_jad_parent";var iframe_ad_data_name="_iframe_ad_data";var iframe_uid_data_name="_iframe_uid_data";var projectName="_QWERJAD_"+_GLOBAL.adid+"_"+_GLOBAL.ad_count+"_";var messenger;this.iframe_node_ad=null;this.iframe_node_uid=null;this.addAdInfo2Iframe_ad=null;_GLOBAL.frame_parent_name=parent_name;_GLOBAL.frame_projectName=projectName;function getSlotData(){if(!isGetedSlotData){isGetedSlotData=true;_GLOBAL.u_allow_coo=u_data.u_allow_coo;_GLOBAL.u_crc=u_data.u_crc;setTimeout(function(){_GLOBAL.time_request_start=now();var pre_time=_GLOBAL.time_request_start-_GLOBAL.time_start;fn_jsonp(_GLOBAL.api_url+_GLOBAL.uri_getAd,fn_assembleParam(_paramMap),function(data){if(data&&(_GLOBAL.page_frameCount==0||_GLOBAL.showInFrame)){_GLOBAL.time_show_start=now();_print("request time :"+(_GLOBAL.time_show_start-_GLOBAL.time_start));_print(data);_GLOBAL.server_time=fn_getServerTime(_GLOBAL.time_show_start,_GLOBAL.time_request_start,data.time);if(data&&data.data&&data.data.p){_GLOBAL.p_dsa=data.data.p.dsa}jadData.setSSnInfo({sid:_GLOBAL.ad_slot_id,dsa:_GLOBAL.p_dsa,ssn:_GLOBAL.ad_ssn});if(data&&data.data&&data.data.slot){var dd=data.data;_GLOBAL.ad_site_id=data.data.slot.siteId;if(dd.sn){_GLOBAL.sn=dd.sn;_print("sn:"+_GLOBAL.sn)}var jadView=new JadView(dd)}else{_print("["+_codeInfo[data.status]+"]")}}else{_print("In iframe , do not show")}})},0)}}if(_GLOBAL.page_frameCount==0||_GLOBAL.dataInFrame){messenger=new Messenger(parent_name,projectName);this.addAdInfo2Iframe_ad=function(data){messenger.sendMessage({targetName:iframe_ad_data_name,action:"add_ad_info",data:data})};this.setSSnInfo=function(data){messenger.sendMessage({targetName:iframe_ad_data_name,action:"set_ssn_info",data:data})};this.add_ad_click=function(data){messenger.sendMessage({targetName:iframe_ad_data_name,action:"add_ad_click",data:data})};this.setUid2Iframe_ad=function(uid,server_time){_print("set local uid...");messenger.sendMessage({targetName:iframe_ad_data_name,action:"set_u_uid",data:{u_uid:uid,server_time:server_time}})};messenger.listen({targetName:iframe_ad_data_name,action:"a",callback:function(data){u_data=data;iframe_ad_success=true;if(data.u_allow_coo==1){if(!isNull(data.ssn)){_GLOBAL.ad_ssn=data.ssn}_print("ssn:"+_GLOBAL.ad_ssn);if(data.u_uid){_print("have local uid...");_GLOBAL.u_uid=data.u_uid;_GLOBAL.u_create_time=data.u_create_time;_GLOBAL.u_hour_count=data.u_hour_count;_GLOBAL.u_day_count=data.u_day_count;_GLOBAL.u_all_count=data.u_all_count;_GLOBAL.u_last_time=data.u_last_time?data.u_last_time:_GLOBAL.u_last_time;_GLOBAL.p_dsa_local=data.dsa;_print("sid["+_GLOBAL.ad_slot_id+"] hour["+_GLOBAL.u_hour_count+"] day["+_GLOBAL.u_day_count+"]  all["+_GLOBAL.u_all_count+"]  time:"+new Date(_GLOBAL.u_last_time*1));getSlotData()}else{_print("no local uid...");if(iframe_uid_success&&uid_global){_print("have global uid...");_GLOBAL.u_uid=uid_global;getSlotData()}else{setTimeout(function(){if(!isGetedSlotData){_print("haven't wait for global uid...");getSlotData()}},_GLOBAL.global_wait_timeout)}}}else{_print("not support local storage...");getSlotData()}}});messenger.listen({targetName:iframe_uid_data_name,action:"a",callback:function(data){uid_global=data.u_uid;if(uid_global){jadDataSelf.setUid2Iframe_ad(uid_global,_GLOBAL.server_time)}iframe_uid_success=true;if(uid_global&&iframe_ad_success&&!_GLOBAL.u_uid){_print("Get uid first time...");_GLOBAL.u_uid=uid_global;getSlotData()}jadDataSelf.destroyIframeNodeUid()}});messenger.listen({targetName:iframe_ad_data_name,action:"destroy",callback:function(data){_print("destroy ad iframe");jadDataSelf.destroyIframeNodeAd()}});this.iframe_node_ad=fn_createNode({tagName:"iframe",attrs:{style:"display:none;border:0px;width:0px;height:0px;",src:_GLOBAL.uri_my+"?"+fn_assembleParamUri({sid:_GLOBAL.ad_slot_id,pn:projectName,sd:_GLOBAL.server_domain},true)+"#"+_GLOBAL.dreamKey+"=1"}},document.body);this.iframe_node_uid=fn_createNode({tagName:"iframe",attrs:{style:"display:none;border:0px;width:0px;height:0px;",src:_GLOBAL.uri_prob+"?"+fn_assembleParamUri(fn_assembleParam(_uidParamMap,{pn:projectName}),true)+"#"+_GLOBAL.dreamKey+"=1"}},document.body);messenger.addTarget(this.iframe_node_uid.contentWindow,iframe_uid_data_name);messenger.addTarget(this.iframe_node_ad.contentWindow,iframe_ad_data_name);_GLOBAL.messenger=messenger}else{_print("In frame, do not create data iframe.");getSlotData()}return this};JadData.prototype.destroyIframeNodeAd=function(){try{this.iframe_node_ad.parentNode.removeChild(this.iframe_node_ad)}catch(e){}};JadData.prototype.destroyIframeNodeUid=function(){try{this.iframe_node_uid.parentNode.removeChild(this.iframe_node_uid)}catch(e){}};jadData=new JadData();function JadSlotData(slot){var pf=_GLOBAL.page_client_type==1?"Pc":"Mobile";this.client_type=pf;this.slot_type=slot["slotType"+pf];this.slot_shape_fixed=slot["slotShapeFixed"+pf];this.slot_shape_float=slot["slotShapeFloat"+pf];this.slot_time=slot["slotResidencetime"+pf];this.slot_width=slot["slotWidth"+pf];this.slot_height=slot["slotHeight"+pf];this.ext_code=slot["extCode"+pf];return this}function JadSlot(jadSlotData,dd,type){var dd=dd||{dspId:null,slot:null,sourceSlot:null,warehouse:null,backup:{sourceSlot:null,warehouse:null}};var selfObject=this;this.hiddenOthersArrray=[];var jadSlotData=jadSlotData||new JadSlotData();this.jadSlotData=jadSlotData;var wrapDiv=fn_createNode({tagName:"div",attrs:{style:{display:"none",visibility:"hidden"},sn:dd.sn}});this.wrapDiv=wrapDiv;this.closed=false;try{if(jadSlotData.ext_code){var ext_code=eval(jadSlotData.ext_code);fn_createNodes(ext_code,wrapDiv)}}catch(e){}if(selfObject.jadSlotData.slot_type==0){if(selfObject.jadSlotData.slot_shape_float==4){document.body.insertBefore(selfObject.wrapDiv,document.body.firstChild)}else{document.body.appendChild(selfObject.wrapDiv)}}else{if(selfObject.jadSlotData.slot_type==1){_GLOBAL.js_node.parentNode.appendChild(selfObject.wrapDiv)}}if(jadSlotData.slot_time>0){_print("set auto close..."+jadSlotData.slot_time);setTimeout(function(){_print("auto close...");selfObject.close()},jadSlotData.slot_time*1000)}this.jadContentDataA=dd;this.jadContentDataB=dd.backup;this.currentContent={contentData:null,content:null};if(this.jadContentDataA&&(this.jadContentDataA.sourceSlot||this.jadContentDataA.warehouse)){_print("show master");this.addContent(this.jadContentDataA)}else{if(this.jadContentDataB&&(this.jadContentDataB.sourceSlot||this.jadContentDataB.warehouse)){_print("no master show backup log");fn_log(_GLOBAL.log_show,_logMap,{shs:2});this.addContent(this.jadContentDataB,true)}else{_print("config error... log");fn_log(_GLOBAL.log_show,_logMap,{shs:9})}}return this}JadSlot.prototype.addContent=function(dd,isBackup){if(isBackup&&this.currentContent.content){this.wrapDiv.removeChild(this.currentContent.content.wrapDiv)}var jadContent;if(dd.sourceSlot){_GLOBAL.ad_dsp_id=1;_print("dsp:1");_print("source_id:"+dd.sourceSlot.sourceId);_GLOBAL.ad_source_id=dd.sourceSlot.sourceId;_GLOBAL.ad_source_slot_id=dd.sourceSlot.sourceSlotId;if(!isBackup){_GLOBAL.ad_advert_id="";_GLOBAL.ad_wh_id=""}jadContent=new JadDspContent(dd.sourceSlot,this.wrapDiv)}else{if(dd.warehouse){_GLOBAL.ad_dsp_id=2;_print("dsp:2");var firstWarehouse=dd.warehouse;if(fn_isArray(dd.warehouse)){firstWarehouse=dd.warehouse[0]}if(!isBackup){_GLOBAL.ad_source_id="";_GLOBAL.ad_source_slot_id=""}jadContent=new JadWhContent(dd.warehouse,this.wrapDiv,this.jadSlotData)}else{_GLOBAL.ad_dsp_id=0;return}}this.currentContent.contentData=dd;this.currentContent.content=jadContent;var selfObject=this;var _findId_count=0;(function(){var suc=selfObject.addClick2iframe();if(!suc){if(_findId_count>_GLOBAL.max_iframe_check){if(!isBackup){_print("show master Error log");fn_log(_GLOBAL.log_show,_logMap,{shs:3,ret:(_GLOBAL.time_show_end-_GLOBAL.time_show_start),sht:(_GLOBAL.time_show_start-_GLOBAL.time_start)});if(_GLOBAL.show_backup&&selfObject.jadContentDataB&&(selfObject.jadContentDataB.sourceSlot||selfObject.jadContentDataB.warehouse)){_print("the master error,show the backup.");selfObject.addContent(selfObject.jadContentDataB,true)}return}else{_print("show backup Error log");fn_log(_GLOBAL.log_show,_logMap,{shs:4,ret:(_GLOBAL.time_show_end-_GLOBAL.time_show_start),sht:(_GLOBAL.time_show_start-_GLOBAL.time_start)});return}}setTimeout(arguments.callee,_GLOBAL.check_iframe_interval);_findId_count++}else{selfObject.show();_GLOBAL.time_show_end=now();_GLOBAL.show_success=1;selfObject.addShowInfo(isBackup)}})()};JadSlot.prototype.addShowInfo=function(isBackup){jadData.addAdInfo2Iframe_ad({server_time:_GLOBAL.server_time,sid:_GLOBAL.ad_slot_id,dsp:_GLOBAL.ad_dsp_id,whid:_GLOBAL.ad_wh_id,dsa:_GLOBAL.p_dsa,ssn:_GLOBAL.ad_ssn});_print("show time:"+(_GLOBAL.time_show_end-_GLOBAL.time_show_start));_print("show success log");fn_log(_GLOBAL.log_show,_logMap,{shs:isBackup?5:1,ret:(_GLOBAL.time_show_end-_GLOBAL.time_show_start),sht:(_GLOBAL.time_show_start-_GLOBAL.time_start)})};var fn_click_log=function(){if(window.__dreamfull_var&&window.__dreamfull_var.callback&&window.__dreamfull_var.callback.click){for(var ci in window.__dreamfull_var.callback.click){try{window.__dreamfull_var.callback.click[ci].call(window)}catch(e){}}}_print("click log");fn_log(_GLOBAL.log_click,_logMap);jadData.add_ad_click({server_time:_GLOBAL.server_time,sid:_GLOBAL.ad_slot_id,dsp:_GLOBAL.ad_dsp_id,whid:_GLOBAL.ad_wh_id})};JadSlot.prototype.addClick2iframe=function(){var flag=false;if(_GLOBAL.ad_is_my_tool){var ele=document.getElementById(_GLOBAL.my_toolbar_id);if(ele){fn_addEvent(ele,"click",fn_click_log);if(_GLOBAL.ad_my_tool_href){ele.href=_GLOBAL.ad_my_tool_href}flag=true}}else{var wrapDiv=this.wrapDiv;var elems=wrapDiv.getElementsByTagName("iframe");var len=elems.length;for(var i=0;i<len;i++){var elem=elems[i];IframeOnClick.track(elem,fn_click_log,1);flag=true}}return flag};JadSlot.prototype.createLogo=function(wrapDiv){fn_createNode({tagName:"div",attrs:{style:"position: absolute; cursor: pointer; bottom: 0px; right: 0px;left:auto !important; z-index: 100; width: 35px; height: 20px; overflow: hidden; display: block; background:transparent repeat url("+_GLOBAL.server_url+"/s/images/logo_mini.gif);"}},wrapDiv)};JadSlot.prototype.createClose=function(wrapDiv){var closeHide=false;if(_GLOBAL.ad_dsp_id==1&&this.currentContent.contentData.sourceSlot){var mp=this.currentContent.contentData.sourceSlot.menuPosition;if(mp&&mp.length>=5){if(mp[4]==1){closeHide=true}}}fn_createNode({tagName:"div",attrs:{style:"position: absolute; cursor: pointer; top: 0px; right: 0px;left:auto !important; z-index: 100; width: 35px; height: 20px; overflow: hidden; display: block; background:transparent repeat url("+_GLOBAL.server_url+"/s/images/"+(closeHide?"none.png":"close_mini.gif")+");"},events:{onmouseover:function(){this.nextSibling.style.display="block";this.style.display="none"}}},wrapDiv);var close=fn_createNode({tagName:"div",attrs:{style:"position: absolute; cursor: pointer; top: 0px; right: 0px;left:auto !important; z-index: 100; display: none; width: 86px; height: 20px; overflow: hidden; background: transparent repeat url("+_GLOBAL.server_url+"/s/images/close_long.gif);"},events:{onmouseout:function(){this.previousSibling.style.display="block";this.style.display="none"}}},wrapDiv);var selfObject=this;fn_addEvent(close,"click",function(){selfObject.close(true)})};JadSlot.prototype.setStyle=function(){var jadSlotData=this.jadSlotData;_GLOBAL.ad_ad_size=jadSlotData.slot_width+"*"+jadSlotData.slot_height;var styleArray={};styleArray.display="none";styleArray.visibility="hidden";styleArray.overflow="hidden";styleArray.width=jadSlotData.slot_width;styleArray.height=jadSlotData.slot_height;styleArray.margin="0px";styleArray.padding="0px";styleArray.border="0px";styleArray["box-sizing"]="border-box";styleArray["z-index"]=_GLOBAL.max_zindex;if(jadSlotData.slot_type==0){var navBar=this.hideOhers({type:jadSlotData.slot_shape_float});styleArray.position="fixed";if(!_GLOBAL.position_fixed){styleArray.position="absolute";document.getElementsByTagName("html")[0].style.background="url(about:blank)";document.body.runtimeStyle.backgroundAttachment="fixed"}switch(jadSlotData.slot_shape_float){case 0:break;case 1:if(_GLOBAL.position_fixed){styleArray.bottom=navBar.bottom+"px";styleArray.right="0px";styleArray.left="auto";styleArray.top="auto"}else{if(!_GLOBAL.position_fixed){styleArray.right="auto";styleArray.left="expression(eval(document.compatMode && document.compatMode=='CSS1Compat') ? documentElement.scrollLeft + (documentElement.clientWidth-this.clientWidth - 1) : document.body.scrollLeft +(document.body.clientWidth-this.clientWidth - 1));";styleArray.bottom="auto";styleArray.top="expression(eval(document.compatMode && document.compatMode=='CSS1Compat') ? documentElement.scrollTop + (documentElement.clientHeight-this.clientHeight - "+navBar.bottom+") : document.body.scrollTop +(document.body.clientHeight-this.clientHeight - "+navBar.bottom+"));"}}break;case 2:styleArray.bottom=navBar.bottom+"px";if(_GLOBAL.page_client_type==2){this.setAutoSize(styleArray,"bottom")}break;case 3:break;case 4:styleArray.position="static";if(_GLOBAL.page_client_type==2){this.setAutoSize(styleArray,"top")}break;default:}}else{if(jadSlotData.slot_type==1){styleArray.position="relative";if(_GLOBAL.page_client_type==2){styleArray.width="100%;";styleArray.height="100%;"}}else{if(jadSlotData.slot_type==2){}else{_print("slot type error"+jadSlotData.slot_type)}}}var cssText=fn_convertCssObj(styleArray);this.wrapDiv.style.cssText=cssText};JadSlot.prototype.setAutoSize=function(styleArray,type){var jadSlotData=this.jadSlotData;var scalex=fn_getScaleX(this.jadSlotData.slot_width,this.jadSlotData.slot_height);var cd=this.currentContent.contentData;if(cd.sourceSlot&&cd.sourceSlot&&cd.sourceSlot.positonControl&&cd.sourceSlot.positonControl==1){var bottom=fn_getScaleBottom(scalex,jadSlotData.slot_height);var left=fn_getScaleLeft(scalex,jadSlotData.slot_width);styleArray[type]=bottom+"px";styleArray.left=left+"px";styleArray["transform:"]="scale("+scalex+","+scalex+")";styleArray["-moz-transform"]="scale("+scalex+","+scalex+")";styleArray["-webkit-transform"]="scale("+scalex+","+scalex+")";styleArray["-o-transform"]="scale("+scalex+","+scalex+")"}else{var width=jadSlotData.slot_width.replace("px","")*scalex;var height=jadSlotData.slot_height.replace("px","")*scalex;var left=fn_getScaleLeft(1,width+"px");styleArray.width=width+"px";styleArray.height=height+"px";styleArray.left=left+"px";this.currentContent.content.setSize({width:width,height:height})}};JadSlot.prototype.show=function(){this.setStyle();if(_GLOBAL.ad_logo==1&&!_GLOBAL.ad_is_my_tool){this.createLogo(this.wrapDiv)}if(!_GLOBAL.ad_is_my_tool&&this.jadSlotData.slot_type!=1){this.createClose(this.wrapDiv)}if(!_GLOBAL.hide_ad){_print("show ad..");this.wrapDiv.style.display="block";this.wrapDiv.style.visibility="visible"}else{_print("hide ad..")}};JadSlot.prototype.close=function(isMan){if(!this.closed&&this.jadSlotData.slot_type!=1){this.closed=true;if(window.__dreamfull_var&&window.__dreamfull_var.callback&&window.__dreamfull_var.callback.close){for(var ci in window.__dreamfull_var.callback.close){try{window.__dreamfull_var.callback.close[ci].call(window)}catch(e){}}}this.wrapDiv.style.display="none";this.showOhers();jadData.destroyIframeNodeAd();this.destroy();fn_destroyJsNode();if(isMan){_print("close log");fn_log(_GLOBAL.log_close,_logMap)}else{_print("auto closed... ")}}};JadSlot.prototype.destroy=function(){try{this.wrapDiv.parentNode.removeChild(this.wrapDiv)}catch(e){}};JadSlot.prototype.hideOhers=function(opt){var opt=opt||{type:-1};var divs=document.getElementsByTagName("div"),el,elStyle={},nav={bottom:0,top:0};for(var i=0,len=divs.length;i<len;i++){el=divs[i];elStyle.zIndex=fn_getCurrentStyle(el,"zIndex");elStyle.display=fn_getCurrentStyle(el,"display");elStyle.position=fn_getCurrentStyle(el,"position");elStyle.width=fn_getStyleInt(el,"width");elStyle.height=fn_getStyleInt(el,"height");elStyle.bottom=fn_getStyleInt(el,"bottom");elStyle.right=fn_getStyleInt(el,"right");elStyle.left=fn_getStyleInt(el,"left");elStyle.top=fn_getStyleInt(el,"top");if(el!=this.wrapDiv&&el.display!="none"){if(elStyle.zindex&&parseInt(elStyle.zindex)>=_GLOBAL.max_zindex){el.style.zIndex=_GLOBAL.max_zindex-1}if(opt.type==1){if(elStyle.position=="fixed"&&elStyle.height<100){if(elStyle.bottom==0){nav.bottom=elStyle.height}if(elStyle.top==0){nav.top=elStyle.height}}else{if(elStyle.position=="fixed"&&(elStyle.width>=100&&elStyle.width<=500)&&(elStyle.height>=100&&elStyle.height<=500)&&(elStyle.bottom>=0&&elStyle.bottom<=10)&&(elStyle.right>=0&&elStyle.right<=10)){this.hiddenOthersArrray.push({el:el,display:elStyle.display});el.style.display="none"}}}}}return nav};JadSlot.prototype.showOhers=function(){for(var i=0;i<this.hiddenOthersArrray.length;i++){if(this.hiddenOthersArrray[i]&&this.hiddenOthersArrray[i].el){this.hiddenOthersArrray[i].el.style.display=this.hiddenOthersArrray[i].display}}};function JadDspContent(sourceSlot,outerDiv){this.wrapDiv=fn_createNode({tagName:"div",attrs:{style:{position:"relative","z-index":0}}},outerDiv);var sr=sourceSlot.sourceReferer;if(sr){var trk="";if(_GLOBAL.page_referrer){}_print(trk);var frameNode=fn_createNode({tagName:"iframe",attrs:{style:{width:sourceSlot.sourceSlotWidth,height:sourceSlot.sourceSlotHeight,margin:"0px",padding:"0px",border:"0px",overflow:"hidden"},frameBorder:"0",allowtransparency:"yes",scrolling:"no",src:sr+"?c="+sourceSlot.code+trk+"#"+_GLOBAL.dreamKey+"=1"}},this.wrapDiv)}else{var code=eval(sourceSlot.code);if(code&&code.length==1&&code[0].attrs&&code[0].attrs.id&&code[0].attrs.id==_GLOBAL.dreamKey){_GLOBAL.ad_is_my_tool=true;_GLOBAL.ad_my_tool_href=code[0].attrs.href;_print("toolbar")}fn_createNodes(code,this.wrapDiv)}this.createShade(sourceSlot);return this}JadDspContent.prototype.createShade=function(sourceSlot){var mp=sourceSlot.menuPosition;if(mp&&mp.length>=4){if(mp[0]==1){fn_createNode({tagName:"div",attrs:{style:"position: absolute; top: -20px; left:-5px; z-index: 99; width: 50px; height: 50px; overflow: hidden; display: block; background:transparent repeat url("+_GLOBAL.server_url+"/s/images/none.png);"}},this.wrapDiv)}if(mp[1]==1){fn_createNode({tagName:"div",attrs:{style:"position: absolute; top: -20px; right: -10px;left:auto !important; z-index: 99; width: 50px; height: 60px; overflow: hidden; display: block; background:transparent repeat url("+_GLOBAL.server_url+"/s/images/none.png);"}},this.wrapDiv)}if(mp[2]==1){fn_createNode({tagName:"div",attrs:{style:"position: absolute; bottom: -20px; left:-10px; z-index: 99; width: 50px; height: 60px; overflow: hidden; display: block; background:transparent repeat url("+_GLOBAL.server_url+"/s/images/none.png);"}},this.wrapDiv)}if(mp[3]==1){fn_createNode({tagName:"div",attrs:{style:"position: absolute; bottom: -20px; right: -10px;left:auto !important; z-index: 99; width: 50px; height: 50px; overflow: hidden; display: block; background:transparent repeat url("+_GLOBAL.server_url+"/s/images/none.png);"}},this.wrapDiv)}}};JadDspContent.prototype.setSize=function(opt){var opt=opt||{width:0,height:0};var frameNode=this.wrapDiv.getElementsByTagName("iframe")[0];if(frameNode){frameNode.style.width=opt.width+"px";frameNode.style.height=opt.height+"px"}};function JadWhContent(warehouse,outerDiv,jadSlotData){this.wrapDiv=fn_createNode({tagName:"div",attrs:{style:{position:"relative","z-index":0}}},outerDiv);if(_GLOBAL.page_platform=="1"&&fn_isArray(warehouse)&&warehouse.length>1){var items=[];for(var i=0;i<warehouse.length;i++){items[i]=this.createFrameNode(jadSlotData,warehouse[i],i)}this.frameNode=items;new AutoPlay({target:this.wrapDiv,id:"box_cndreamfull",width:300,height:250,items:items})}else{var frameNode=null;if(fn_isArray(warehouse)&&warehouse.length>=1){frameNode=this.createFrameNode(jadSlotData,warehouse[0],0)}else{if(!fn_isArray(warehouse)){frameNode=this.createFrameNode(jadSlotData,warehouse,0)}}this.frameNode=frameNode}return this}JadWhContent.prototype.createFrameNode=function(jadSlotData,warehouse,frameIndex){var wh=fn_isArray(warehouse)?warehouse[0]:warehouse;wh.width=jadSlotData.slot_width;wh.height=jadSlotData.slot_height;if(wh.pms){try{var pm=eval(wh.pms);if(fn_isArray(pm)){for(var i=0;i<pm.length;i++){(new Image).src=pm[i]}}}catch(e){}}wh.src=null;var frameId="__asdfewq_frame_"+frameIndex;var frameNode=null;var click_href=fn_assembleParamUri(fn_assembleParam(_logMap,{_c:wh.creativeId,_s:wh.schemeId,_u:_GLOBAL.u_uid,_p:wh.price,_mi:wh.impid,_i:wh.imprspid,_o:wh.odspId,_l:Base64Util.encode(wh.ldp)}));wh.click_href=click_href;_GLOBAL.messenger.listen({targetName:frameId,action:"get_ad",callback:function(data){_print("get ad data");_GLOBAL.messenger.sendMessage({targetName:frameId,action:"show_ad",data:wh})}});_GLOBAL.messenger.listen({targetName:frameId,action:"dsp_show_log",callback:function(data){_print("dsp_show_log ");_print(wh);fn_log(_GLOBAL.log_dsp_show,_logMap,{_c:wh.creativeId,_s:wh.schemeId,_p:wh.price,_mi:wh.impid,_i:wh.imprspid,_o:wh.odspId})}});frameNode=fn_createNode({tagName:"iframe",attrs:{id:frameId,style:{width:jadSlotData.slot_width,height:jadSlotData.slot_height,margin:"0px",padding:"0px",border:"0px",overflow:"hidden"},frameBorder:"0",allowtransparency:"yes",scrolling:"no",src:this.getVertSrc2(wh,frameId)}},this.wrapDiv);_GLOBAL.messenger.addTarget(frameNode.contentWindow,frameId);return frameNode};JadWhContent.prototype.setSize=function(opt){var opt=opt||{width:0,height:0};try{if(fn_isArray(this.frameNode)){}else{this.frameNode.style.width=opt.width+"px";this.frameNode.style.height=opt.height+"px"}}catch(e){}};JadWhContent.prototype.getVertSrc=function(warehouse){if(warehouse.src){return warehouse.src+"&"+fn_assembleParamUri(fn_assembleParam(_logMap,param))+"#"+_GLOBAL.dreamKey+"=1"}else{var param={at:warehouse.type,al:warehouse.imgLink,as:warehouse.imgUrl};return _GLOBAL.api_url+_GLOBAL.uri_dsp_vert+"?"+fn_assembleParamUri(fn_assembleParam(_logMap,param))+"#"+_GLOBAL.dreamKey+"=1"}};JadWhContent.prototype.getVertSrc2=function(warehouse,frameId){var param=fn_assembleParamUri({fi:frameId,pn:_GLOBAL.frame_projectName},true);return _GLOBAL.vert_url+"?"+param+"#"+_GLOBAL.dreamKey+"=1"};var ToolbarPC=function(homeUrl,height,time,searchUrl){var toolbarSelf=this;this.node=fn_createNode({tagName:"div",attrs:{style:{height:"60px",margin:"0 0 15px 0",padding:"0",border:"none",overflow:"hidden",position:"fixed",right:"0px",left:"auto",bottom:height,zIndex:"999",display:"inline-block",opacity:"0.6","font-weight":"bold"}}},document.body);var div_home=fn_createNode({tagName:"div",attrs:{style:"position:relative;background-color:#f0f0f0;float:left;width:52px;margin:0px 5px;height:52px;border:2px solid #ddd;border-radius:30px;box-shadow:1px 1px 3px #555;overflow:hidden;"}},this.node);var a_home=fn_createNode({tagName:"a",attrs:{style:"cursor: pointer;  left: 2px;  top: 2px;  position: absolute;  width: 48px;  height: 48px;background: transparent url("+_GLOBAL.server_url+"/s/images/toolbar/home.png) no-repeat top left;",target:"_blank",href:homeUrl}},div_home);fn_addEvent(a_home,"click",function(){_print("click tool bar log");var url="http://a/api/click.do";fn_jsonp(url,fn_assembleParam(_logMap,{bl:"home"}),function(data){})});var div_find=fn_createNode({tagName:"div",attrs:{style:"position:relative;background-color:#f0f0f0;float:left;width:52px;margin:0px 5px;height:52px;border:2px solid #ddd;border-radius:30px;box-shadow:1px 1px 3px #555;overflow:hidden;"}},this.node);fn_addEvent(div_find,"mouseover",function(){div_find.style.width="290px"});fn_addEvent(div_find,"mouseout",function(){if(input_find_content!=document.activeElement){div_find.style.width="52px"}});var a_find=fn_createNode({tagName:"a",attrs:{style:"cursor: pointer;  left: 2px;  top: 2px;  position: absolute;  width: 48px;  height: 48px;background: transparent url("+_GLOBAL.server_url+"/s/images/toolbar/find.png) no-repeat top left;"}},div_find);var div_find_content=fn_createNode({tagName:"div",attrs:{style:"position:absolute;height:52px;width:240px;overflow:hidden;left:56px;top:7px;background:transparent;"}},div_find);var p_find_p=fn_createNode({tagName:"p",attrs:{style:"display: block; margin: 3px 0 0 0;background-color:transparent;"}},div_find_content);var input_find_content=fn_createNode({tagName:"input",attrs:{style:"height:28px;font:16px arial;line-height:28px;border:1px solid #ccc;padding:1px;width:155px;float:left;margin-right:5px;outline:0; "}},p_find_p);var a_find_btn=fn_createNode({tagName:"a",attrs:{style:"cursor: pointer; margin:8px 0 0 0;background-color:transparent;float:left;color:#bbb;text-shadow:1px 1px 1px #fff;text-decoration:none;font-size:12px;",target:"_blank"},text:"search"},p_find_p);fn_addEvent(a_find_btn,"click",function(){a_find_btn.href=searchUrl+input_find_content.value;_print("click search bar log");var url="http://a/api/click.do";fn_jsonp(url,fn_assembleParam(_logMap,{bl:"search",ref:input_find_content.value}),function(data){})});fn_addEvent(a_find_btn,"mouseover",function(){a_find_btn.style.color="#0b965b"});fn_addEvent(a_find_btn,"mouseout",function(){a_find_btn.style.color="#bbb"});var a_find_close=fn_createNode({tagName:"span",attrs:{style:"cursor: pointer;   width: 12px;  height: 12px;  margin: 10px 0 0 8px;  background: url("+_GLOBAL.server_url+"/s/images/toolbar/quickdelete.gif) no-repeat;  background-position: 0px 0px;float: left;          color: #bbb;          text-shadow: 1px 1px 1px #fff;          text-decoration: none;          font-size: 12px;"}},p_find_p);fn_addEvent(a_find_close,"mouseover",function(){a_find_close.style.backgroundPosition="0px -34px"});fn_addEvent(a_find_close,"mouseout",function(){a_find_close.style.backgroundPosition="0px 0px"});fn_addEvent(a_find_close,"click",function(){setTimeout(function(){div_find.style.width="52px"},200)});setTimeout(function(){toolbarSelf.destroy()},time*1000);return toolbarSelf};ToolbarPC.prototype.close=function(){if(this.node){this.node.style.display="none"}};ToolbarPC.prototype.destroy=function(){if(this.node){try{this.node.parentNode.removeChild(this.node)}catch(e){}}};function JadView(dd){var t=this;var jadSlotData=new JadSlotData(dd.slot);if(jadSlotData.slot_type==0&&jadSlotData.slot_shape_float==0){}else{jadSlot=new JadSlot(jadSlotData,dd)}if(_GLOBAL.toolbar_enable&&_GLOBAL.page_client_type==1&&jadSlotData.slot_type==0&&jadSlotData.slot_shape_float==1){fn_jsonp(_GLOBAL.toolbar_pc_url+"?sid="+_GLOBAL.ad_slot_id,null,function(data){if(data&&data.url&&data.surl&&data.time){toolbar_pc=new ToolbarPC(data.url,jadSlotData.slot_height,data.time,data.surl)}})}return this}};_init()}catch(e){try{_p&&console.log(">>>>>>>>>>>error info");_p&&console.log(e.message)}catch(ee){}}})();